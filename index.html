<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>音声テスト（iPhone向け）</title>
  <style>
    body {
      background-color: #222;
      color: white;
      font-family: sans-serif;
      text-align: center;
      padding: 100px 20px;
    }

    button {
      font-size: 24px;
      padding: 20px 40px;
      background-color: #4caf50;
      border: none;
      border-radius: 8px;
      color: white;
      cursor: pointer;
    }

    button:active {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <h1>音が鳴るかテスト</h1>
  <p>以下のボタンをタップして、音が鳴るか確認してください。</p>
  <button id="playButton">音を鳴らす</button>

  <script>
    const button = document.getElementById("playButton");

    button.addEventListener("click", () => {
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      const audioCtx = new AudioContext();

      // iOS向けに resume を強制
      if (audioCtx.state === 'suspended') {
        audioCtx.resume();
      }

      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();

      oscillator.type = "sine"; // 波形（sine, square, sawtooth, triangle）
      oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // 440Hz = A

      gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime); // 音量
      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      oscillator.start();
      oscillator.stop(audioCtx.currentTime + 0.5); // 0.5秒で止める
    });
  </script>
</body>
</html>
